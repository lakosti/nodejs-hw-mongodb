Крок 1

Створіть гілку hw3-crud з гілки hw2-mongodb і виконуйте це завдання в гілці hw3-crud.

Організуйте роутинг в вашому застосунку:

винесіть код роутів з файлу src/server.js до файлу src/routers/contacts.js
винесіть код контролерів з файлу src/server.js до файлу src/controllers/contacts.js

Крок 2

Покращіть обробку помилок в вашому додатку. Для цього:

Додайте в залежності проєкта пакет http-errors для опрацювання різних помилок

Створіть і застосуйте в файлі src/server.js middleware errorHandler, призначений для обробки помилок у вашому Express-сервері. Цей middleware має приймати чотири аргументи. errorHandler у разі виявлення помилки має відправити клієнту відповідь зі статусом 500 та об’єкт з наступними властивостями:

status — статус відповіді
message — повідомлення про результат виконання операції "Something went wrong"
data — конкретне повідомлення про помилку, отримане з об'єкта помилки

Створіть і застосуйте у файлі src/server.js middleware notFoundHandler, призначений для обробки запитів, коли клієнт звертається до неіснуючого маршруту. notFoundHandler у разі виявлення помилки має відправити клієнту відповідь зі статусом 404 та об’єкт з наступними властивостями:

message — повідомлення про результат виконання операції "Route not found"

Створіть і застосуйте у файлі src/routers/contacts.js функцію ctrlWrapper, яка діятиме як обгортка для контролерів у вашому Express-додатку, для автоматичної обробки помилок, що можуть виникнути під час виконання запитів. В цій обгортці при виникненні помилки викличте next(err) для залучення middleware errorHandler

Для роута GET /contacts/:contactId додайте перевірку чи контакт за переданим contactId було знайдено. Якщо контакт не було знайдено, то за допомогою http-errors відповідь сервера має бути зі статусом 404 і містити об’єкт з наступними властивостями:

status — статус відповіді
message — повідомлення про результат виконання операції
data — об’єкт {message: "Contact not found"}

Крок 3

Створіть роут POST /contacts для створення нового контакту. Тіло запиту має в себе включати наступні властивості:

name - обов’язково
phoneNumber - обов’язково
email - не обовʼязково
isFavourite - не обовʼязково
contactType - не обовʼязково
Обробка цього роута має включати:

Реєстрацію роута в файлі src/routers/contacts.js
Опис контролера для цього роута в файлі src/controllers/contacts.js
Створення сервісу в файлі src/services/contacts.js
Відповідь сервера, в разі успішного створення нового контакту, має бути зі статусом 201 і містити об’єкт з наступними властивостями:
status — статус відповіді
message — повідомлення про результат виконання операції "Successfully created a contact!"
data — дані створеного контакту

Крок 4

Створіть роут PATCH /contacts/:contactId для оновлення даних існуючого контакту. Тіло запиту має в себе включати наступні властивості:

name - не обов’язково
phoneNumber - не обов’язково
email - не обовʼязково
isFavourite - не обовʼязково
contactType - не обовʼязково

Обробка цього роута має включати:

Реєстрацію роута в файлі src/routers/contacts.js
Опис контролера для цього роута в файлі src/controllers/contacts.js
Створення сервісу в файлі src/services/contacts.js
Відповідь сервера, в разі успішного оновлення даних контакту, має бути зі статусом 200 і містити об’єкт з наступними властивостями:
status — статус відповіді
message — повідомлення про результат виконання операції "Successfully patched a contact!"
data — оновлені дані контакту
Якщо контакт не було знайдено, то за допомогою http-errors відповідь сервера має бути зі статусом 404 і містити об’єкт з наступними властивостями:
status — статус відповіді
message — повідомлення про результат виконання операції
data — об’єкт {message: "Contact not found"}

Крок 5

Створіть роут DELETE /contacts/:contactId для видалення існуючого контакту.

Обробка цього роута має включати:

Реєстрацію роута в файлі src/routers/contacts.js
Опис контролера для цього роута в файлі src/controllers/contacts.js
Створення сервісу в файлі src/services/contacts.js
Відповідь сервера, в разі успішного видалення контакту, має бути зі статусом 204 без тіла відповіді
Якщо контакт не було знайдено, то за допомогою http-errors відповідь сервера має бути зі статусом 404 і містити об’єкт з наступними властивостями:
status — статус відповіді
message — повідомлення про результат виконання операції
data — об’єкт {message: "Contact not found"}

Крок 6

Поміняйте гілку, з якої зараз деплоїться ваш проєкт на render.com. Переконайтеся, що зміни успішно задеплоєні
